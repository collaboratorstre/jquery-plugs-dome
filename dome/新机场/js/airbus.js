var datas1 = {   
		    tsForecastList: ["-", "-", "-", "-", "-", "-", "0", "0", "0", "0", "0", "0","3","4","5","0", "0", "0", "0", "0", "0","3","4","2"],
		        tsTrueList: ["1", "2", "3", "4", "6", "5", "4", "3", "2", "1", "3", "2","3", "6", "7", "8", "5", "4","3", "3", "2", "1", "3", "5"],
			zxForecastList: ["-", "-", "-", "-", "-", "-", "0", "0", "0", "0", "0", "0","0", "0", "0", "0", "0", "0","3","4","5","0", "0", "0"],
			    zxTrueList: ["1", "3", "2", "1", "2", "3", "2", "5", "4", "3", "2", "3","4", "6", "4", "3", "4", "5","4", "6", "7", "3", "2", "3"],
			        lkjcfz: ["0", "0", "0", "0", "2", "0", "8", "3", "4", "7", "2", "4","5", "6", "7", "8", "9", "1",, "-", "-", "-", "-", "-"],
			    lgsj: [{ "name":"当地", "value":3238},{ "name":"外地", "value":1447}],
			    lkjcys:{lkwdl:"20%",lkwdrs:1000,zcdgl:"70%",zcdgrs:3500,zclgl:"85%",zclgrs:3879,lkywl:"10%",lkywrs:800},
			    dgjc:{hwdgl:"20%",hzcdgl:"70%",hywdgl:"10%"},
			    lgjc:[{"hbgs":"熊熊公司","lgbc":"001次","fjxh":"京B A001","jclgsj":"9:10","jclksl":"80"},
					    {"hbgs":"速巴公司","lgbc":"002次","fjxh":"冀B C001","jclgsj":"9:15","jclksl":"90"},
					    {"hbgs":"新余公司","lgbc":"003次","fjxh":"冀B V403","jclgsj":"9:20","jclksl":"85"}],
				bsyl:2,
				outsideProvincesResident:[
			        {
			            "alwaysamount":6006,
			            "todayamount":12539,
			            "name":"山东"
			        },
			        {
			            "alwaysamount":1046,
			            "todayamount":998,
			            "name":"河南"
			        },
			        {
			            "alwaysamount":95,
			            "todayamount":482,
			            "name":"湖北"
			        },
			        {
			            "alwaysamount":226,
			            "todayamount":449,
			            "name":"浙江"
			        },
			        {
			            "alwaysamount":212,
			            "todayamount":425,
			            "name":"河北"
			        },
			        {
			            "alwaysamount":192,
			            "todayamount":397,
			            "name":"安徽"
			        },
			        {
			            "alwaysamount":375,
			            "todayamount":359,
			            "name":"江苏"
			        },
			        {
			            "alwaysamount":50,
			            "todayamount":220,
			            "name":"辽宁"
			        },
			        {
			            "alwaysamount":31,
			            "todayamount":206,
			            "name":"黑龙江"
			        },
			        {
			            "alwaysamount":74,
			            "todayamount":202,
			            "name":"山西"
			        },
			        {
			            "alwaysamount":75,
			            "todayamount":201,
			            "name":"广东"
			        },
			        {
			            "alwaysamount":48,
			            "todayamount":138,
			            "name":"宁夏"
			        },
			        {
			            "alwaysamount":35,
			            "todayamount":130,
			            "name":"四川"
			        },
			        {
			            "alwaysamount":35,
			            "todayamount":112,
			            "name":"湖南"
			        },
			        {
			            "alwaysamount":80,
			            "todayamount":102,
			            "name":"福建"
			        },
			        {
			            "alwaysamount":4,
			            "todayamount":91,
			            "name":"云南"
			        },
			        {
			            "alwaysamount":36,
			            "todayamount":86,
			            "name":"内蒙古"
			        },
			        {
			            "alwaysamount":11,
			            "todayamount":77,
			            "name":"吉林"
			        },
			        {
			            "alwaysamount":11,
			            "todayamount":76,
			            "name":"甘肃"
			        },
			        {
			            "alwaysamount":20,
			            "todayamount":48,
			            "name":"江西"
			        },
			        {
			            "alwaysamount":10,
			            "todayamount":47,
			            "name":"广西"
			        },
			        {
			            "alwaysamount":3,
			            "todayamount":33,
			            "name":"贵州"
			        },
			        {
			            "alwaysamount":55,
			            "todayamount":30,
			            "name":"陕西"
			        },
			        {
			            "alwaysamount":2,
			            "todayamount":12,
			            "name":"西藏"
			        },
			        {
			            "alwaysamount":10,
			            "todayamount":11,
			            "name":"新疆"
			        },
			        {
			            "alwaysamount":2,
			            "todayamount":7,
			            "name":"海南"
			        },
			        {
			            "alwaysamount":5,
			            "todayamount":5,
			            "name":"青海"
			        },
			        {
			            "alwaysamount":112,
			            "todayamount":0,
			            "name":"天津"
			        },
			        {
			            "alwaysamount":307,
			            "todayamount":0,
			            "name":"上海"
			        },
			        {
			            "alwaysamount":31,
			            "todayamount":0,
			            "name":"重庆"
			        },
			        {
			            "alwaysamount":0,
			            "todayamount":0,
			            "name":"澳门"
			        },
			        {
			            "alwaysamount":0,
			            "todayamount":0,
			            "name":"台湾"
			        },
			        {
			            "alwaysamount":0,
			            "todayamount":0,
			            "name":"香港"
			        }
			        // ,
			        // {
			        //     "alwaysamount":217,
			        //     "todayamount":0,
			        //     "name":"北京"
			        // }
				]

		}

		var tor_direc = function(containerId,data){
		    var tor_direc_chart = echarts.init(document.getElementById(containerId), 'dark');

		    var thisTime = new Date();
		    var thisHour = thisTime.getHours();
		    var tor_direc_option = {
		        tooltip : {
		            trigger: 'axis',
		            // axisPointer: {
		            //     type: 'line',
		            //     lineStyle:{
		            //         color:'#3299fe'
		            //     },
		            //     label: {
		            //         backgroundColor: '#6a7985'
		            //     }
		            // }
		        },
		        legend: {
		            // width:360,
		            // height: 10,
		            // left:'7%',
		            // top:'-10',
		            // bottom:'88%',
		            itemWidth:30,//图例宽度
		            itemHeight:10,//图例高度
		            itemGap:10,//图例间隔
		            // data:['评价','投诉','咨询']
		            data:[
		                {
		                    name:'巴士客流',
		                    textStyle:{
		                        color:'white'
		                    },
		                    icon:'stack'//图例样式（长方形)
		                },
		                {
		                    name:'巴士运力',
		                    textStyle:{
		                        color:'white'
		                    },
		                    icon:'stack'
		                }

		            ]
		        },
		        grid: {
		        	top: '15%',
		            left: '4%',
		            right: '4%',
		            bottom: '1%',
		            // width: '95%',
		            // height: '80%',
		            containLabel: true
		        },
		        xAxis : [
		            {
		                type : 'category',
		                axisPointer: {
		                    value: thisHour,
		                    snap: true,
		                    lineStyle: {
		                        color: '#97cdfc',
		                        opacity: 0.5,
		                        width: 2
		                    },
		                    label: {
		                        backgroundColor: '#6a7985',
		                        formatter:'时间：{value}点'
		                    },
		                    handle: {
		                        show: true,
		                        color: 'transparent'
		                    }
		                },
		                boundaryGap : false,
		                splitLine:{//坐标轴在grid区域中的分隔线
		                    show: true,
		                    lineStyle:{
		                        color: '#021979',
		                        type: 'solid'
		                    }
		                },
		                axisLine:{
		                    lineStyle:{
		                        color:'#021979'
		                    }
		                },
		                axisLabel:{
		                    show: true,//是否显示刻度标签
		                    textStyle:{
		                        color:'#97cdfc'
		                    }
		                },
		                axisTick:{
		                    show: false//是否显示坐标轴刻度
		                },

		                data : ['0','1','2','3','4','5','6','7','8','9','10','11','12','13','14','15','16','17','18','19','20','21','22','23']
		                // data:data.timeList
		            }
		        ],
		        yAxis : [
		            {
		            	name : '辆',
		            	nameTextStyle:{
		            		color:'white'
		            	},
		                type : 'value',
		                splitLine:{
		                    show: true,
		                    lineStyle:{
		                        color: '#021979',
		                        type: 'solid'
		                    }
		                },
		                axisLine:{
		                    lineStyle:{
		                        color:'#021979'
		                    }
		                },
		                axisLabel:{
		                    show: true,//是否显示刻度标签，
		                    formatter: '{value}',
		                    textStyle:{
		                        color:'#97cdfc'
		                    }
		                },
		                axisTick:{
		                    show: false//是否显示坐标轴刻度
		                }
		            }
		        ],
		        series : [
		            {
		                name:'巴士客流',
		                type:'line',
		                areaStyle: {
		                    normal: {
		                        // color:'#65ffff',
		                        opacity:'0.2',
		                       /* color: new echarts.graphic.LinearGradient(//颜色渐变
		                            0, 0, 0, 1,
		                            [
		                                {offset: 0.5, color: '#65ffff'},
		                                {offset: 1, color: 'transparent'}
		                            ]
		                        )*/
		                    }
		                },
		                lineStyle: {
		                    normal:{
		                        color:'#65ffff'
		                    }
		                },
		                itemStyle:{
		                    normal:{
		                        color:'#65ffff'
		                    }
		                },
		                smooth: true,
		                // data:[0,0,0,0,50,200,330,320,310,"-","-","-"]
		                data:data.zxTrueList
		            },
		            {
		                name:'巴士运力',
		                type:'line',
		                areaStyle: {
		                    normal: {
		                        // color:'#3399fe',
		                        opacity:'0.2',
		                       /* color: new echarts.graphic.LinearGradient(//颜色渐变
		                            0, 0, 0, 1,
		                            [
		                                {offset: 0.5, color: '#3399fe'},
		                                {offset: 1, color: 'transparent'}
		                            ]
		                        )*/
		                    }
		                },
		                lineStyle: {
		                    normal:{
		                        color:'#3399fe'
		                    }
		                },
		                itemStyle:{
		                    normal:{
		                        color:'#3399fe'
		                    }
		                },
		                smooth: true,
		                data:data.tsTrueList
		            }
		        ]
		    }
		     tor_direc_chart.setOption(tor_direc_option);

		 }   

		 var otherProvMigration_in = function(containerId,data) {
		    var otherProvMigrationIn_chart = echarts.init(document.getElementById(containerId), 'dark');
		    // console.log(data);
		    var geoCoordMap = {
		        '石家庄': [114.48,38.03],
		        '北京': [116.4551,40.2539],
		        '山东': [117.1582,36.8701],
		        '河北': [114.4995,38.1006],
		        '吉林': [125.8154,44.2584],
		        '黑龙江': [127.9688,45.368],
		        '辽宁': [123.1238,42.1216],
		        '内蒙古': [111.4124,40.4901],
		        '新疆': [87.9236,43.5883],
		        '甘肃': [103.5901,36.3043],
		        '宁夏': [106.3586,38.1775],
		        '山西': [112.3352,37.9413],
		        '陕西': [109.1162,34.2004],
		        '河南': [113.4668,34.6234],
		        '安徽': [117.29,32.0581],
		        '江苏': [118.8062,31.9208],
		        '浙江': [119.5313,29.8773],
		        '福建': [119.4543,25.9222],
		        '广东': [113.5107,23.2196],
		        '江西': [116.0046,28.6633],
		        '海南': [110.3893,19.8516],
		        '广西': [108.479,23.1152],
		        '贵州': [106.6992,26.7682],
		        '湖南': [113.0823,28.2568],
		        '湖北': [114.3896,30.6628],
		        '四川': [103.9526,30.7617],
		        '云南': [102.9199,25.4663],
		        '西藏': [91.1865,30.1465],
		        '青海': [101.4038,36.8207],
		        '天津': [117.4219,39.4189],
		        '上海': [121.4648,31.2891],
		        '重庆': [107.7539,30.1904],
		        
		        '台湾': [121.50,25.05],
		        '香港': [114.10,22.20],
		        '澳门': [113.33,22.13]
		    };


		    var centerCity = {name:'石家庄'};
		    var centerCity1 = {name:'北京'};
		    var HZData = new Array();  //先声明一维
		    for(var i=0; i<data.length; i++){    //一维长度为i,i为变量，可以根据实际情况改变
		        HZData[i]=new Array();  //声明二维，每一个一维数组里面的一个元素都是一个数组；
		        HZData[i][0]= centerCity;
		        HZData[i][1]= data[i];
		        HZData[i][2]= centerCity1;
		    }
		    // console.log(HZData);

		    var x = HZData[0][1].todayamount;
		    // console.log(x);
		    var convertData = function (data) {
		        var res = [];
		        for (var i = 0; i < data.length; i++) {
		            var dataItem = data[i];
		            var fromCoord = geoCoordMap[dataItem[0].name];
		            var toCoord = geoCoordMap[dataItem[1].name];
		            if (fromCoord && toCoord) {
		                res.push({
		                    fromName: dataItem[0].name,
		                    toName: dataItem[1].name,
		                    coords: [fromCoord, toCoord]
		                });
		            }
		        }
		        return res;

		    };
		     var convertData1 = function (data) {
		        var res = [];
		        for (var i = 0; i < data.length; i++) {
		            var dataItem = data[i];
		            var fromCoord = geoCoordMap[dataItem[2].name];
		            var toCoord = geoCoordMap[dataItem[1].name];
		            if (fromCoord && toCoord) {
		                res.push({
		                    fromName: dataItem[2].name,
		                    toName: dataItem[1].name,
		                    coords: [fromCoord, toCoord]
		                });
		            }
		        }
		        return res;

		    };
		    
		    
		    var series = [];
		    [['石家庄', HZData,'北京']].forEach(function (item, i) {
		    	 console.log(item)
		    	 console.log(item[1])
		        series.push({
		                name: item[0] + ' Top10',
		                type: 'lines',
		                zlevel: 1,
		                tooltip : {
		                    show: false
		                },
		                effect: {
		                    show: true,
		                    period: 6,
		                    trailLength: 0.7,
		                    color: '#7bb4d2',
		                    symbolSize: 3
		                },
		                lineStyle: {
		                    normal: {
		                        color: '#ffffff',
		                        width: 0,
		                        curveness: 0.2
		                    }
		                },
		                data: convertData(item[1])
		            },
		            {
		                name: item[0] + ' Top10',
		                type: 'lines',
		                zlevel: 2,
		                tooltip : {
		                    show: false
		                },
		                symbol: ['none', 'circle'],
		                symbolSize: 1,
		                effect: {
		                    show: true,
		                    period: 6,
		                    trailLength: 0,
		                    symbol: 'diamond',
		                    symbolSize: 6,
		                    color:'#7bb4d2'
		                },
		                lineStyle: {
		                    normal: {
		                        color: '#7bb4d2',
		                        width: 1,
		                        opacity: 0.6,
		                        curveness: 0.2
		                    }
		                },
		                data: convertData1(item[1])
		            },
		            {
		                name: item[0] + ' Top10',
		                type: 'lines',
		                zlevel: 1,
		                tooltip : {
		                    show: false
		                },
		                effect: {
		                    show: true,
		                    period: 6,
		                    trailLength: 0.7,
		                    color: '#7bb4d2',
		                    symbolSize: 3
		                },
		                lineStyle: {
		                    normal: {
		                        color: '#ffffff',
		                        width: 0,
		                        curveness: 0.2
		                    }
		                },
		                data: convertData1(item[1])
		            },
		            {
		                name: item[0] + ' Top10',
		                type: 'lines',
		                zlevel: 2,
		                tooltip : {
		                    show: false
		                },
		                symbol: ['none', 'circle'],
		                symbolSize: 1,
		                effect: {
		                    show: true,
		                    period: 6,
		                    trailLength: 0,
		                    symbol: 'diamond',
		                    symbolSize: 6,
		                    color:'#7bb4d2'
		                },
		                lineStyle: {
		                    normal: {
		                        color: '#7bb4d2',
		                        width: 1,
		                        opacity: 0.6,
		                        curveness: 0.2
		                    }
		                },
		                data: convertData(item[1])
		            },
		            {
		                name: item[0] + ' Top10',
		                type: 'effectScatter',
		                coordinateSystem: 'geo',
		                zlevel: 2,
		                tooltip : {
		                    show: true,
		                    // formatter: "{a} <br/>{b} : {c}"
		                },
		                rippleEffect: {
		                    brushType: 'stroke'
		                },
		                label: {
		                    normal: {
		                        show: true,
		                        position: 'right',
		                        formatter: function(params){
		                            return params.data[2];
		                        }
		                    }
		                },
		                symbolSize: function (val) {
		                    if(val[2]==0){
		                        return 0.5;
		                    }else{
		                        return val[2]/Math.pow(10, x.toString().length-1);
		                    }
		                },
		                itemStyle: {
		                    normal: {
		                        color: '#7bb4d2'
		                    }
		                },
		                data: item[1].map(function (dataItem) {
		                    return {
		                        name: dataItem[1].name,
		                        value: geoCoordMap[dataItem[1].name].concat([dataItem[1].todayamount])
		                    };
		                })
		            });
		    });
		    console.log(series);
		    var otherProvMigrationIn_option = {
		        backgroundColor: '#0b0c45',
		        tooltip : {
		            trigger: 'item',
		            formatter: "{a} <br/>{b} : {c}",
		        },
		        geo: [
		            {
		                map: 'china',
		                label: {
		                    emphasis: {
		                        show: false
		                    }
		                },
		                roam: true,
		                itemStyle: {
		                    normal: {
		                        areaColor: '#0b0c45',
		                        borderColor: '#2b6cbe',
		                        borderWidth:3,
		                        shadowColor: 'rgba(45,110,192,2)',
		                        shadowBlur: 40
		                    },
		                    emphasis: {
		                        areaColor: '#0b0c45'
		                    }
		                }
		            },
		            {
		                map: 'china',
		                label: {
		                    emphasis: {
		                        show: false
		                    }
		                },
		                roam: true,
		                itemStyle: {
		                    normal: {
		                        areaColor: '#0b0c45',
		                        borderColor: '#2b6cbe',
		                        borderWidth:1,
		                        // shadowColor: 'rgba(45,110,192,2)',
		                        // shadowBlur: 30,
		                    },
		                    emphasis: {
		                        areaColor: '#0b0c45'
		                    }
		                }
		            }
		        ],
		        series: series
		    };

		    otherProvMigrationIn_chart.setOption(otherProvMigrationIn_option);
		}

var refreshData=function(){ 
	//机场巴士监测  折线图
	tor_direc("tor_direc",datas1);
	//机场巴士监测  迁徙图
	otherProvMigration_in("bus_change",datas1.outsideProvincesResident);
	//机场巴士监测情况
	$("#tor_table tr td span").each(function(){
		var ids = $(this).attr("id");
		$(this).text(datas1.lkjcys[ids])
	})
	if(datas1.bsyl == 0){
		$("#spo_color").css("background","#66CC33");
		$("#spo_wen").text('充足');
	}else if(datas1.bsyl == 1){
		$("#spo_color").css("background","#FFCC00");
		$("#spo_wen").text('紧促');
	}else if(datas1.bsyl == 2){
		$("#spo_color").css("background","#DE0000");
		$("#spo_wen").text('不足');
	}
	//到港监测
	// $(".port_data tr td span").each(function(){
	// 	var ids = $(this).attr("id");
	// 	$(this).text(datas1.dgjc[ids])
	// })
	
	//巴士出站监测
	$.each(datas1.lgjc,function(i,n){
		var data1 = '';
		data1 += '<tr>'+
		 '<td>'+n.hbgs+'</td><td>'+n.lgbc+'</td><td>'+n.fjxh+'</td><td>'+n.jclgsj+'</td><td>'+n.jclksl+'</td>'+
		 '</tr>'
		 $('#depart_cont').append($(data1));
	})
}

//折线图和迁徙图切换
$("#bus_change").width($("#tor_direc").width());
$("#bus_change").height($("#tor_direc").height());
$("#lButtonA").click(function(){
			    $("#lButtonA").removeClass('btn-default').addClass('btn-primary') ;
			    $("#lButtonB").removeClass('btn-primary').addClass('btn-default') ;

			    $("#tor_direc").show();
			    $("#bus_change").hide();
			})
$("#lButtonB").click(function(){
			   
			     $("#lButtonA").removeClass('btn-primary').addClass('btn-default') ;
			    $("#lButtonB").removeClass('btn-default').addClass('btn-primary') ;			   
			    $("#tor_direc").hide();
			    $("#bus_change").show();
		})

$(document).ready(function(){
	refreshData();
    // setInterval(refreshData,5*60*1000);
})